DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'WIKI.EntityFramework.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201711170454027_v1.0'
BEGIN
    CREATE TABLE [dbo].[Accounts] (
        [Id] [bigint] NOT NULL IDENTITY,
        [WUCC_UserId] [uniqueidentifier] NOT NULL,
        [UserName] [nvarchar](20) NOT NULL,
        [FullName] [nvarchar](max),
        [Department] [nvarchar](max),
        [Email] [nvarchar](max),
        CONSTRAINT [PK_dbo.Accounts] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [IX_WUCC_UserId] ON [dbo].[Accounts]([WUCC_UserId])
    CREATE UNIQUE INDEX [IX_UserName] ON [dbo].[Accounts]([UserName])
    CREATE TABLE [dbo].[Answers] (
        [Id] [bigint] NOT NULL IDENTITY,
        [Text] [nvarchar](max) NOT NULL,
        [QuestionId] [bigint] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        [CreatedBy] [nvarchar](max),
        [UpdatedTime] [datetime],
        [UpdatedBy] [nvarchar](max),
        CONSTRAINT [PK_dbo.Answers] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_QuestionId] ON [dbo].[Answers]([QuestionId])
    CREATE TABLE [dbo].[Questions] (
        [Id] [bigint] NOT NULL,
        [Text] [nvarchar](200),
        [ContentNo] [nvarchar](20),
        [ContentType] [nvarchar](20),
        [Title] [nvarchar](60) NOT NULL,
        [Sticky] [bit] NOT NULL,
        [Important] [bit] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        [CreatedBy] [nvarchar](max),
        [UpdatedTime] [datetime],
        [UpdatedBy] [nvarchar](max),
        CONSTRAINT [PK_dbo.Questions] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Contents] (
        [Id] [bigint] NOT NULL IDENTITY,
        [ContentNo] [nvarchar](20),
        [ContentType] [nvarchar](20),
        [Title] [nvarchar](60) NOT NULL,
        [Sticky] [bit] NOT NULL,
        [Important] [bit] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        [CreatedBy] [nvarchar](max),
        [UpdatedTime] [datetime],
        [UpdatedBy] [nvarchar](max),
        CONSTRAINT [PK_dbo.Contents] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Documents] (
        [Id] [bigint] NOT NULL,
        [Description] [nvarchar](200),
        [ContentNo] [nvarchar](20),
        [ContentType] [nvarchar](20),
        [Title] [nvarchar](60) NOT NULL,
        [Sticky] [bit] NOT NULL,
        [Important] [bit] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        [CreatedBy] [nvarchar](max),
        [UpdatedTime] [datetime],
        [UpdatedBy] [nvarchar](max),
        CONSTRAINT [PK_dbo.Documents] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[DocumentAttachments] (
        [Id] [bigint] NOT NULL IDENTITY,
        [FileName] [nvarchar](100),
        [DisplayName] [nvarchar](50),
        [DocumentId] [bigint] NOT NULL,
        CONSTRAINT [PK_dbo.DocumentAttachments] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_DocumentId] ON [dbo].[DocumentAttachments]([DocumentId])
    CREATE TABLE [dbo].[Tags] (
        [ContentId] [bigint] NOT NULL,
        [Value] [nvarchar](20) NOT NULL,
        CONSTRAINT [PK_dbo.Tags] PRIMARY KEY ([ContentId], [Value])
    )
    ALTER TABLE [dbo].[Answers] ADD CONSTRAINT [FK_dbo.Answers_dbo.Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [dbo].[Questions] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[DocumentAttachments] ADD CONSTRAINT [FK_dbo.DocumentAttachments_dbo.Documents_DocumentId] FOREIGN KEY ([DocumentId]) REFERENCES [dbo].[Documents] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201711170454027_v1.0', N'WIKI.EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400ED5D5B6FDB38167E5F60FF83A0A7DD45264E3A33C56C60CF20759A81314DD2AD9376DF025A621CA2BA8D44A53116FBCBE6617ED2FE852575A544522225D97112A12F312FDFE1E59C8F47BC9CFEEF8F3FA7BF3CBA8EF100C308F9DECC3C3E3C320DE859BE8DBCF5CC8CF1DD773F99BFFCFCD7BF4CDFDBEEA3F1392FF73D2D476A7AD1CCBCC73838994C22EB1EBA203A749115FA917F870F2DDF9D00DB9FBC393AFAE7E4F87802098449B00C63FA29F6307261F283FC9CFB9E05031C03E7C2B7A11365E9246799A01A97C08551002C3833BF2C7E5B1CBE27D5F1E63C24C9DFFCF0AB699C3A0890B62CA173671AC0F37C0C3069E9C94D049738F4BDF5322009C0B9DE049094BB034E04B31E9C94C5553B73F48676665256CCA1AC38C2BEAB0978FC7D363A937AF54E636C16A347C62F1D28DAEB640C67E6A965F964F04DA32EEB64EE84B45C36C2733F84E93023181D66B50E8C24EF0B5C9D0628297250E804511DFAEFC098C70E8E4338F3608C43E01C181FE39583ACDFE0E6DAFF0ABD99173B0EDB46D24A92574920491F433F8021DE7C827759CB17B6694CAAF526F58A4535A64EDAA98587DFFE601A9744385839B050016600969874E857E8C11060687F0418C3D0A3183019444E7A4DD6979BF9FC96E85B580AFD3546B64066330E85A07FE520447F89319AC60578FC00BD35BE9F996F88F59DA34768E70919F08D8788E9923A388CA1B6E07352BC4530F9534972B3A033188010BB90AAE19645BD7701720696329D9456D56C6B5EF40D86BAA696541A2DAD41D6357C1C427334CDE35F318C68EBDB7BDA8C330F21EDF5352A2DED8C24A4BFBB61BDDB6CDD906E025BDE6AA5AADB68E4257840EB44A72493651A9FA0931488EE51903A088779E66D6A6B11911CFAEE27DF612AE679B7D7205C43AA6EBEA4C0D28F43AB2B4594EDD42289BCDAABA4894BDF6BD5B9168A20EED2003641DC564C18EBD2EFBF542B09A242B62DEA1A61A749C8DBADB81E4B8CACAF053FBCF389A5014F1B65E1067E8841E95674051A297A07145D906F5F86CE0958CAD039857762E8CCF634093AABF52AF959D58D1BE973A4CF913E07F9D23CF3ADD8D567A9BCDAABA4291537F20C46568882D4431FBDC9910E473ADC536F32A7B2538C81754FFFFA80222C742EF9A2B7257F967E6643316E53A0A96CAFFD011EB823C59700AF92EC557DD273E4C0963DF0E341D8FE0C458103362DB27E1C4454A602DA1B97ADC6B62DF3AA7FD1A998622FF3FA8CE0B78E8645AB8E26D5D3AF1966C96AF336863ABD52F1098791B59F9ECCBBCDEDCECE0A4B913B3C351C3DB65D7FC0E67B761D8898AD3A12F12B22E2818E814706DE43064EB7EE6FFB9EB567303BD1944C56E3DAA184D083C7AB083B5873AA9D7E0281BBB3034EF2E890BC6087E41AAC35FD1052E349DD8F6C79E7BD1061E9CFC0114C60ABBFC208E9C3CB99F4AD5E70944DF56914F9164AE6B3E67C16A7CDD5B6BFF76CA3EDE839ED087B744DFA43261A05646A492366E6B1599F942BEF0C3A1043E3D44AEF0ACF4164015B302BA405CA4D2AB626CB26E5F710AB0DFA07278768070CA92F091C32CF11D14EE4615E959067A100382D6352ABA7E831D3DE1612EA398470A1479DDD96BEAB88666FF3F14D2824D526A26D84A61346BB9A95AE699B4C36D94A7B66E5BC8B368FDB74404D9840C9CA3DBE2DEA7D270D55E8C80E945561EE545AC16EE6EE406F530AA5AC4F6AC030BFEA4E56B9B355B2163C8A0E246E2298AD945146D57525A3A84B88EB8F124AC6CEA92BCFE1D4B48690511C0F9065B4D42F599B4328B35A308A9B421C4491D38250DA100751662962B0462F45630B29E2A63B3452C4345B71B42558D5EC16ACC451E32092D45A4D46C5F9A69437CD9862B2DB6875BB53F0108A66B3BAC619B0C2BACE0049747B52EDA8C220341ED9F0E3A1BC74692F5E4CE7DA55547BB512A06B0C5EEE4F166458E44D27E933B52C613A91BC679B5E802020AE2EF3BE2D4B3196E9E3B6F9774BFD375F6E8A31B122C1D3AFA2B58524EC87600D6BB994BD6C788EC208934F34B002D49B9EDB2E57AC4AFD12D3CC6555D99D9FBCDC68F3F2F4EF7285A9BFF23B940095C3488AAEE9AC269D84ACA5C86A1AF48921704028D8979DFB4EEC7AF2C55F5EBBF2148C85A964A8E3954FC258B032551DA9DC2D6191CA54752476F783C562D3D5D1B2775A2C5096C4634C27B5E9E6DC204EB338BFB2AAA86A6A9CB26D7F2D16E2A828B1A4E2767438DD3365EBA729EA08EC27168BD3F4E92547AB6C81B170950C6D3CBAC324407BC79DA634615536BA2A26CA6668E3D5DBC624EF8D5514CE4C6FBB9021295886BCEABEDA06731657D1BE32591B2BBDCF29404B33347A979EDE55BA9726A963E4C7662C489EA68EC21C9B5526AB4C1EF9E399F347FE69DC9B3E24400AEC21ADB91DF2184D5F698C47D37FE9A6DFB067A069FB322405E39757DD8EF5576E0F56BF9B988C914D463619D9A4139B30FB8583F18A1C5383619A40B6C335E56386CA664F91AAC15AEC6B850A6BB1191A78CC295605AEE174EBC9352B398E184CA744681ADA24AEBEFF1EEB106BC2D06BE8DEAE3195EB6DC2C5E1B6CBD6ADF80A9B18BFDB76EEB846EEE51A5939581D6CC3AE239335577F1D4CD67F2371E4AEA1B98BB97ACEC232C9DA58FC345732B4F1A4F42ACAD7469712A428BF2B7A9D2EF9DCAEA32241EEB45634DC366F12D149B31BEF97374A1BD76845BCE7B046D39B4BBD97660188C28A2CACD5B294D669B2E116BA1C2BBB0ECEE208EFA76F7D5AB83B3EF52285F42CA5F85DDCF1C9EED7B407B2E62EDCA4454C830CCE03B2E9659BE526C2D03DA4050E97BF3B730725369E17B8001EBA234E54FA6E8086A1F9A916097B7FA2524FA2C87604F793982717C24B3ABB787AB9426B44C7B5F57DA5E62B074144E8D843BFC71025887748181C78E1D9F07166FEC758443749E913E33A8CA1F1DFDE91A4BD07105AF7405368ED5946CFA0D2791BFEE682C7BFB368DD0247F782AB0487D640D20D00FD62149A7D47291DAF8EC194F336CB5593D63C3116FFBE2D2B1F18572121C213E3A88379081ED55177000FF2A8AE97620A1ECE895AA601D5A961FA518C9F4CD30750643EA49BDE4873CFEB25C01D71D9706D0321579EE90B31DFEA137EF5C1FC0AE94F0EF758BE0BC868DC4319B7F07ACC735EC546431D0DF5251AAAE4F9E8FEAEC282485AE3623CDAF868E3ED362EBB4CF29CD7E57AEC4DA1111CEB738120D4A610FA477D642EB2A6C6576C5959E32BB65B64CB17A322525AEF64FC42CAEDB831255DC93AE1ED176F0BA22CF5EA5D5308A52180C77566B01D9D913EE468C3D187D2BEEAC81B5BE30D2EDA60C70F1A41B8C121DAA5486B1A8803D2912CE4E0801DDF12E8B0CAA9101E705CDBF6626DE3AE39EC737CBD8E4C5409B0A7B043B1DBF8794F19302F0F9AC3B46027F1F17611634C1A5A8297F4ACE3DFED3EF05C53A0A1DE31F77A45B57B9AD875CF27561D1FD7A83EB3DAB1E8D28B5A64955BD10F899440B3CC889B5C0EBF2D529D103D0F4ED602AE14C64E2420CF6D17A110E54E2420CB6CC7578A81279290E7AA8BD00E91D724B62CA7DE00A5587A22A10F248709D1A6A8154AE1F6A4E294E3203644E41381930C7EC47619AB4F3F385FD5869F712C3EA59878ADCB9F00A321B0E42011F6F85BB664E120FC4BBE39D25F673042EB12624A303D6855968CA2CCC2BBF3F3D5ABD6A2BC48CDBDBE8018902F15701A6274072C4CB22D18454918EBC4F5A6970B57D05E7857310E624CBA0CDD9553B9674E57C026F94918C16A9BA757C91673344417483311FDD8BAF2DEC5C8B18B769F0BBE0424107469CD76E7E85C62BA4BB7DE1448FC7FB02903CA86AFF008AEA11B38042CBAF296E0017669DB4D043FC035B036F965693948FB4454877D7A86C03A046E946194F5C94FA2C3B6FBF8F3FF012F47D8905B890000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201711210629112_v1.1'
BEGIN
    CREATE TABLE [dbo].[Download_Log_Daily] (
        [Id] [bigint] NOT NULL IDENTITY,
        [AttachmentId] [bigint] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Download_Log_Daily] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[View_Log_Daily] (
        [Id] [bigint] NOT NULL IDENTITY,
        [ContentId] [bigint] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.View_Log_Daily] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[View_Log_History] (
        [Id] [bigint] NOT NULL IDENTITY,
        [ContentId] [bigint] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.View_Log_History] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[View_Log_Statistic] (
        [Id] [bigint] NOT NULL,
        [ViewCount] [bigint] NOT NULL,
        [CreatedTime] [datetime] NOT NULL,
        [CreatedBy] [nvarchar](max),
        [UpdatedTime] [datetime],
        [UpdatedBy] [nvarchar](max),
        CONSTRAINT [PK_dbo.View_Log_Statistic] PRIMARY KEY ([Id])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201711210629112_v1.1', N'WIKI.EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB6EDCB819BE2FD0771074D5165E4F9CED065B63BC0B671C6F079BC469C64E7A67D01A7A4C44875989B23D28FA647BB18FD45728A923299212A9C378C6167CE3E1E1FB79F84FA448FEFFFBFD8FE9CF8F9E6BDDC33042817F621F1DBEB22DE83BC112F9AB133BC6B7DFFD68FFFCD39FFF347DB7F41EAD2F79B9EF693952D38F4EEC3B8CD7C79349E4DC410F44871E72C2200A6EF1A1137813B00C26AF5FBDFAC7E4E8680209844DB02C6BFA39F631F260F283FC9C05BE03D73806EE876009DD284B27398B04D5FA083C18AD81034FECAFF35FE787EF4875BC390F49F243107EB3AD531701D29605746F6D0BF87E8001262D3DBE8AE0028781BF5AAC4902702F376B48CADD023782590F8ECBE2BA9D79F59A76665256CCA19C38C281670878F47D363A936AF556636C17A347C62F1D28DAEB640C4FEC53C709C8E0DB5695D6F1CC0D69B96C84674108D36146303ACC6A1D5849DE577873BA46499183822708EBD0BF036B16BB380EE1890F631C02F7C0FA14DFB8C8F9156E2E836FD03FF163D765DB485A49F2B80492F4290CD630C49BCFF0366BF97C695B13BEDEA45AB1A8C6D4493B35F7F19BBFDBD647421CDCB8B060016600169874E817E8C31060B8FC043086A14F3160328802F50AADAF57B3D935E1B7B024FA4B8C96129AF5381482FE978310FE25C2685B1FC0E37BE8AFF0DD89FD9A48DF397A84CB3C2103BEF211115D5207873134267C4E8A371026FF6A51AE277406D720C41EA46C3830A9771E406ECF54A69352AAEA65CD8F1E60682A6A49A551D26A685DC2C73E38C7503CFE15C388B6BEB9A7F538B310D25E5FA252D2CE4842FABB1DD6DBCDE08274B55EAA5BAD557588467E04F76895F09462B26CEB33749302D11D5AA70EC2619E799DCA5A44288781F73970998A79DEF525085790B25BA028B008E2D069AB22CA761A2989BCDA8B54131F03BF91E71A540471977A9009E2B662A2B13E06DD4DB516214A6468529708BB7544DE0CE27A2C3072BE15FAE16D40240DF8C628736F1D8418946E455BA051456F414517CAB7AB86CE15B05243E72ABC9586CE64CF504167B55EA47ED675E346F539AACF517DF6B2D23C0B9CD833D75279B517A9A674DCC8331839215AA71EFAE84D8EEA7054873BEA4DE6AAEC1463E0DCD1FFDEA3084B9D4BB1E875A93F4B3FB3A698B0295057B6D3FE8008DC52C597002F52D9EBFAA4E7C8850D7BE047BD68FB3314AD5DB069A0F5432FA4321630DEB86C14B6A1C4ABBAA2D311C54EE2F505C187968245AB8E22D5D1AFE9C76435791B7D7DBDD2F109FBA1B59B9ECCDBCDF5D6BE159624B7F8D570F4D8B6BF807DF0DF0760F93E589D01E46E8C95315F7D54C835B44A2BFA749F328D3F90B5B0D06CD591215E9085EEE97CC0689A77D034A7DF74AEBB6AAE0C662B9C92D1AA55965A081D0C3C8FB0056784EFF41310DC9E1C0894474FF5197BAA976065E887901A4FEA7E64E65DF442A4A5BF005732818DFE0A43A48B5ECEA80F7AF2557BAAA9E3D87241C2561D7DCFE1F9660B2B916C4AFF89081B842DF921AB3C72C473E28805ED3759693AED78A2A8FE22B942E72B3C1DA8597A6B653C78BDC3BED26914050E4AA6BBB27B539CE3E3DBFBCE5F5A4D87FAD286B3870249FB8910A035617BD28813FBC8AEB2F7857F065D88A175EAA4B7B0662072C052E2D690166837A9F8E85B3629BFE1C137E86F021D226730A4EA0FB844BD454472918F45A144BE83D6C06D18934A3D4D71A6BD2D285473C88A05FA543F37F45D87347B4F426C4241A932114D23349D30DC55CF74751F205593ADF535B29C77D967F9261ED0232661B2F2EBE9807CDF8A43353AB20566D5983B9D56B09FC9B7C0B7A90AA5CE0EA901C3AC11D40338BB495CA047D9518FAB08662E459469E62A9351D405C4F9DE447EDDB3D4D8B9EACA730436AD20642A4E04C8321AEA975A5B4028B31A308A33D8024491D38050CA900051666962B042AF44630B69E2A69F38948869762356F53B9A04AF5A44730615EDE3B31BB092DD130122496DA8C92FC605083E5B0FAB58CAA9D08A027A78CC424085C814A960326A421CFAF21E04534C7557A2AABB34BCACA243ACBC0A4A50C337628014FA61C2775463106A0F1489E3A16DFE8D1D00A673CD626E6CF125E8068397FBE4854129F2A693F411852C613A51BCB630FD00D66BB23C605E5FC852AC45FAF4C2ECBB85F98B045E8A317122C9C304456B0B4A44DEC00A5672A90558C273144698AC7DC00DA00B94D9D2138AF1E65321B4392DDE428A93974B705E9EFE5F5AE9EA1B14870AA0721849D1159DD5A493909514554D8B3E80015C104A16DEB3C08D3D5FED40A96B730F15B0305C863E5EF960010B56A6EA23959F6C58A432551F89FD04C362B1E9FA68D92B022C509624624C2795E9165C4981B304DF9C67543D364EB56D772E96E2E830B1A2E2303C9C7EB865EBA729FA08EC3295C5A95BBEAAD1B8BD25168ECB30C6A35B3712B4B7824B5287C5ED207122CA6618E355DBC624EF8C5414CE4C67B95021694886BAEAAECA06732088E3BE32D9182BBD6D24414B330C7A971E21E2BA9726E963E4677758903C4D1F8539BBC34D56993CEA8F3DD71FF9F64267F5A100D2D01ECA9AC3288F51F4B5C67814FDE72EFA357B0686B2AF42D2107E75D561A49FBBDBC2AF9B988C519B8CDA64D426ADB409B35FD89B5E51631A68983A9061744D79D596DBEC29520DB4167B9796D35A6C86011EF3259083ABF942F8E49C957C7EE98DA7646806DC24AFBEFB1E6B1F36A16F1BBAB336863B632F350ED76DB66EE5E7E8E5F8EDB673471BB9A336B2F261BA076D568FA8A5D19A2086D16AFC254D1687CF199EEB9F78EBB61FBB568766B085FB92ED5AF76DE5D192F56DC998DB909C8A28938DB1C469E6328CF1946A47966F8CAE3497B2FCB6E855E329E6B61D1505722BCFA1E602641D89569C5D7BE5B196DAE8B169E2ED83C746CFED7536CD12100D8B2CADD5604AAB6AB2E662A41A2BBBA1C8E248AF4C3EE1B47067213BCF4F1D9AC644D5571FD475EA65BEF7CC6DAE9C5CED6BF61578FAF3AF04183960180E284F1AF7C5034A447D2EA88118860F98AB839CC62E934727642F9C10E17C73B548413D4B297E17E79BB3B3C5CD21E684C3C66911DB2283748F96F4A0F1621361E81DD202878BDFDC998B128F362FF001F8E8164638BD934B1F88FEB112A36E77E2C54DA268C95D1956078DE3A76B0BF78A6FD00AD1716DBC526E787D5712AB2DF6D16F314409E22D9286ED9AFB4BF87862FFC79A475749E963EB328CA1F5DFCE31DEFC7B103A77C09068E55D8C8EE1DEF236FCC5038F7F65D1DA8574EB04C7856D3340320DCDF66C189A7DC84A395E2DC39CE56D56B326AD796CCDFF7D5D563EB02E42A2088FAD572DC44372539FDA1DDCCB4DFD4E8C29B98D2F6B990154AB8699C7177B324EEF8191C5600B66232DBC6FA8006E899B1E3CEA15F9927D27518AF9C65CE1F32F16DE20F3C9115E2B6C03320A775FC22D3D1ABCCF566C14D451509FA3A02A9E1FD95D2B2C79E37E34C6A38C8F32DE2CE3AA83B4FB6C97AB5171A4427064AE0B244170A4D03F98230B316F0C56B1656583556CBB9833CF8645946ABD95F04B556ECB8D29A5256B85B75B7A5BF2CC75A7DED5BD61DD07F068677AB033750752F75985C8E292B4F45FDBB35BBBC024CF660E76558D6BED6F8FFA7B30FD2D84DD68299892B81B7DB44B53DE0D107B340BAAD81B3D767C20D07E9953234EC6E863EC848F211CAEDCE540132D351117694263A7A8B74012CFCD57D80767ADEE10E23805DB9C02C509C01DDE0B17A20F6C7D8C5FB879EA21ACC053C611C8DFC1655AB095B001DB787A5DF95AA44869AFC3026CFF3DFEBAB7833B8722E8F4D8FFD33CE9BF3F4FF88B4F155767363BE49C2F8B9A9FE84FCF1F13AD7C43F76552FD996546C2E40AF84D0FF84BD1F3F7C61BC0B55EF79711C8739B49683CFE2F23906536E36B85069051C873F54918470EA8235B96D36F8056880119D17B92C3BCBADE48AE451402795F1F7C9794BA26C5AE078856A0ECAA76688A9A8006327092D13C5B46A10E645468098321330E87504B73D0A009B5947723B8827934055E43EF71F004AD20068DCE8D04A3269A4A2F2111C4AB41C42D20D695AC80D25F673042AB12624A307DE8700E415166EEDF06B96F5269515EA4B26AFA003120EB26701A62740B1C4CB21D184549ACB6649F8ADE88B881CBB97F11E3758C4997A177C34B36F56FEAE827711FF8364F2F92EFE2511F5D20CD4474E977E1BF8D91BB2CDA7D2ED932504050C729DB1BA17389E91EC96A53208991025540D9F015FEDE25F4D62E018B2EFC05B8876DDA7615C1F770059C4D7EC34B0DD23C11FCB04FCF105885C08B328CB23EF9497878E93DFEF47FF310027BAAA50000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201711230220454_v1.2'
BEGIN
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201711230220454_v1.2', N'WIKI.EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB6EE3B819BE2FD0771074D516D93899ED0EB681B38B8C33D91A9BC3749CCCF42E6064C6214607AF4425318A3ED95EEC23F5154AEA488AA444CA926327426E621EBE9F87FF448AE4FFBFDFFF18FFFCECB9D6230C2314F8C7F6E1FE816D41DF09E6C85F1CDB31BEFFEE47FBE79FFEFCA7F1C7B9F76C7DC9CB7D4FCB919A7E746C3F60BC3C1A8D22E7017A20DAF790130651708FF79DC01B8179307A7770F08FD1E1E10812089B6059D6F873EC63E4C1E407F939097C072E710CDC8B600EDD284B2739B304D5BA041E8C96C081C7F6D7E9AFD3FD8FA43A5E9D8524F92908BFD9D6898B0069CB0CBAF7B6057C3FC00093961EDD447086C3C05FCC962401B8D7AB2524E5EE811BC1AC07476571DDCE1CBCA39D1995157328278E70E019021E7E9F8DCEA85ABDD518DBC5E891F14B078AF63A19C363FBC4710232F8B655A5753471435A2E1BE14910C27498118CF6B35A7B5692F715DE9D2C515264AFE009C23AF46FCF9AC42E8E4378ECC31887C0DDB33EC5772E727E85ABEBE01BF48FFDD875D9369256923C2E81247D0A83250CF1EA33BCCF5A3E9DDBD688AF37AA562CAA3175D24E4D7DFCFEEFB6754988833B17162CC00CC00C930EFD027D18020CE79F00C630F429064C0651A05EA1F5F56632B925FC1696447F89D15C42B31E8742D0FF7210C2BF44186DEB023C9F437F811F8EED7744FACED0339CE70919F08D8F88E8923A388CA131E13352BC8130F9578B723DA153B80421F62065C39E497DF400723BA6321E9552552F6B7EF4044353514B2A0D925643EB1A3E77C13986E2F1AF1846B4F5CD3DADC7998490F6FA1A9592764A12D2DFEDB03EAC7A17A49BE55CDD6AADAA7D34F2123CA245C2538AC9B2ADCFD04D0A440F68993A08FB79E66D2A6B11A11C06DEE7C0652AE679B7D7205C40CA6E81A2C02C8843A7AD8A28DB69A424F26A6F524D5C067E23CF35A808E22E752013C46DC544635D06EB9B6A2D429448DFA4AE1176EB88BCEFC5F59861E47C2BF4C38780481AF08D51A6DE32083128DD8AB640838ADE808A2E94EFBA1A3A57C04A0D9DABF0561A3A933D43059DD57A93FA59D78D1BD4E7A03E07F5D9C94AF3347062CF5C4BE5D5DEA49AD271234F61E48468997AE8833739A8C3411D6EA93799ABB2138C81F340FF3B4711963A9762D1DB527F967E664D316153A0AEEC5AFB0322704B155F02BC4965AFEB939E211736EC811F76A2ED4F51B474C1AA81D60F9D90CA58C078E3B251D8FA12AFEA8A4E4714D712AF2F083EB5142C5A7510A935FD9A6E4C5693B7D1D5D72B1D9FB01B5ADBE9C97C58DD6EEC5B614972835F0D078F6DF30BD827FF3C00F3F360710A90BB3256C67CF54121D7D02AADE8CB7DCA34FE40D6C242B3550786784316BAA3F3018369DE42D39C7ED3B915C443ABD6461823A355AB1BB510D6B0E73CC2067C0FBED32F4070736C2F501E1CD357EC985E8385A1DB416ABCA8B7915973D1E99096FE025CC90436BA270C91751CC88C7AAF075DB5A79AFA892DD71F6CD5C1D5EC9F6F36B0F0C8A6F49F88B041D8921FB2CA0347BC268E98D17E9385A5D38E278AEA6F922B743EBAD3819AA497548673D65BEC2B9D4451E0A064BA2B9B35C5B13DBEBD1FFDB9D574862F6D387B0690B49F08015A12B6278D38B60FED2A7B5FF9A7D085185A274E7AE96A022207CC256E0D698176938A6FBC6593F20B1D7C83FE26D021720643AAFE804BD45B442417F958144AE43B6809DC8631A9D4D31467DADB82423587AC58A04FF57343DF7548B3D722C42614942A13D13442E311C35DF54C57F7BD5135D95A1F1FCB79977D856FE2013D6212262B3F96F6C8F7AD3854A3231B60568DB9D36905FB557C037C9BAA50EAEC901A30CC1A413D80D3BBC4057A969DECB88960E652449966AE3219459D419CEF4DE4B73B4B8D9DABAE3C4760D30A42A6E244802CA3A17EA9B5058432AB01A338722D4014390D08A50C0910659626062BF44A34B690266EFA45438998663762553F9B49F0AA45346750D13E3EBB012BD93D112092D4869AFC625C80E0B3F5B08AA59C0AAD28A087C72C0454884C910A26A326C4A12FAF3D30C5545723AABA4BC3CB2A3AC4CAABA004357C230648A11F467C473506A1F6FC90381EDAE6DFD801603AD72CE6C6165F826E3078B94F5E1894226F3C4ADF4CC812C623C5E30AE30BB05C92E501F3D8429662CDD2971626DFCDCC1F20F0528C911349DE21285A5B5022F20616B0924B2DC01C9EA130C264ED03EE005DA04CE69E508C379F0AA1CD69F116529CBC5C82F3F2F4FFD24A579F9CD8570095C3488A2EE8AC269D84ACA4A86A5AF4BD0BE08250B2F09E046EECF96A074A5D9B7B978085E132F4F1CAF70958B032551FA9FC64C32295A9FA48EC2718168B4DD747CB1E0D6081B22411633CAA4CB7E04A0A9C25F8E63CA3EAB171AA6DD7E762298E0E132B2AF6C3C3E9875BB67E9AA28FC02E53599CBAE5AB1A8DDB5B62E1B80C633CBA752341FB20B8247558DC0E1227A26C86315EB56D4CF2D64845E1CCAC2D172A240DC95057DD56D960CEFF70DC57261B63A5978B2468698641EFD213435CF7D2247D8CFCA80E0B92A7E9A3304775B8C92A9307FDB1E3FA23DF5E585B7D288034B487B2663FCA63107DAD311E44FFB58B7ECD9E81A1ECAB9034845F5DB51FE9E7AEB2F0EB262663D026833619B4492B6DC2EC1776A657D498061AA60EA41F5D53DEACE5367B8A5403ADC55E9DE5B4169B6180C77C09E4E06ABE10BE3867259F5F3AE329199A0137C9AB6FBFC7DA854DE8DA866EAD8DE1CED84B8DC36D9BAD5BF9397A397EBBEDDCC1466EA98DAC7C98EE409BD5236A69B426887EB41A7F2793C5E173FAE7FA17DEBAEDC6AED5A1196CE1BE65BBB6FEB6F260C9BAB664CCE5474E4594C9C658E2347319C6784AB523CB3746579A4B597E5BF4AAF11473DB8E8A02B995E7507301B28E442BCEAEBDF2584B6DF0D834F176C163A3E7F6D636CD12100D8B2CADD5604AAB6AB2E662A41A2BBBA1C8E248AF4CBEE0B4706721D79E9F3A348D89AAAFDEABEBD4C97CEF98DB5C39B9DAD5EC2BF0F4E75F093070403F1C509E34EE8A079488FA5C5003D10F1F305707398D5D260F4EC84E3821C2F9E66A91827A9652FC2ECE3767678B9B23CA09878DD322B64506E911CDE941E3D92AC2D0DBA705F667BFB91317251E6D5EE002F8E81E4638BD934BDF83FEB112926E7BC2C38DA268CE5D1956C788E3A76B03F78AEFD002D1716DBC526E787D57129A2DF6D16F314409E23D9246E99AFA73F87C6CFFC79A463749E923EB3A8CA1F5DFB543BAF98F20741E8021D1CABB186B4677CBDBF0170F3CFF95456B17C16D2D382E4A9B01926924B657C3D0EC4356CAF16A19D52C6FB39A3569CD236BFAEFDBB2F29E7515124578641DB4100FC94D7D6A77702737F5D7624CC96D7C59CB0CA05A35CC3C9CD88B717A078C2CC656301B69E1394305704BDCF4E051A7C8D7ECB38852CCF7E60A9F7FA0F00E994F8EF038611B9041B8BB126EE9D1E05DB66283A00E82FA1A0555F1FCC8F65A61C993F683311E647C90F16619571DA4DD65BB5C0D8223158243735D2089792385FEC11C59087163B08A2D2B1BAC62DB859879352CA254EBAD845FAA725B6E4C292D592BBCEDD2DB9267AED7EA5DDD1BD65D000F76A6033B537720759755882C0C494BFFB53DBBB58B43F26AE6605BD5B8D6FEF6A0BF7BD3DF42940D51300D603A9B4D75688DB63A5C1D6AA31BC48EAC962ABC46A7A0DDF2A646988CC1C5D80A1743385BB9CD71265A7A085CA0098D8DA2CEE248BC365761177CB5BA3388C3146C720A140700B7782B5C083EB0F1317EE3E6A983A8022F1946207F069769C146A2066CE2E575E5639122A59D8E0AB0F9E7F8EB9E0E5E3B12C15A6FFDBFCC8BFEBBF382BFF852717566B333CEF9B2A8F985FEF4F831D1CA77745B26D59F5966244CAE80DFF47EBF143D7F6EBC015CEB717F19813CB79984C6DBFF3202596633BE56640019853C579F8471E0803AB26539FD0668451890117D2439CCA3EB8DE45A042190F7F5C97749A95B52ECB6876005CAAE6A47A6A8896720032719CDB36514E940468596301832E36808B5347B8D99504B793B622B980753E035F40EC74ED08A61D0E8DC48306A82A974121141BC1944DC02625DC90A28FD750A23B42821C604D3870EE7101465A6FE7D90FB269516E5452AABA60B88015937819310A37BE06092EDC0284A42B525FB54F442C41D9C4FFDAB182F634CBA0CBD3B5EB2A97F53473F09FBC0B7797C957C168FBAE8026926A24BBF2BFF438CDC79D1EE33C9968102823A4ED9DE089D4B4CF74816AB02490C14A802CA86AFF0F7AEA1B774095874E5CFC0236CD3B69B089EC3057056F9052F3548F344F0C33E3E456011022FCA30CAFAE427E1E1B9F7FCD3FF0135C4609C98A50000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201711272349048_v1.3'
BEGIN
    ALTER TABLE [dbo].[DocumentAttachments] ADD [CreatedTime] [datetime] NOT NULL DEFAULT '1900-01-01T00:00:00.000'
    ALTER TABLE [dbo].[DocumentAttachments] ADD [CreatedBy] [nvarchar](max)
    ALTER TABLE [dbo].[DocumentAttachments] ADD [UpdatedTime] [datetime]
    ALTER TABLE [dbo].[DocumentAttachments] ADD [UpdatedBy] [nvarchar](max)
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201711272349048_v1.3', N'WIKI.EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400ED5DDD72DBB815BEEF4CDF81C3ABB693B5E26C37B3F5C8BBE3C8F1D6B3499C4676D23B0F4CC13226FCD192A0634DA74FB617FB487D8502FC050880042852966C8C6F2C00E73BF839E7E0000470FEF7FB1FD39F1F02DFB9877182A2F0D83D3C78E93A30F4A2050A97C76E8A6FBFFBD1FDF9A73FFF69FA76113C389FCB72DFD37284324C8EDD3B8C57479349E2DDC100240701F2E228896EF181170513B08826AF5EBEFCC7E4F0700209844BB01C67FA290D310A60F683FC9C45A107573805FEFB6801FDA4482739F30CD5F9000298AC80078FDD2FE7BF9E1FBC25E4787D1693E46F51FCD5754E7C04485DE6D0BF751D1086110698D4F4E82A81731C47E172BE2209C0BF5CAF2029770BFC04162D38AA8BEB36E6E52BDA98494D5842796982A3C010F0F0FBA277264DF25E7DEC56BD47FA2FEF28DAEAAC0F8FDD13CF8B48E7BB4E93D7D1CC8F69B9A28767510CF36E46303928A85E3859DE177873B242599117954C10D1A17F2F9C59EAE33486C7214C710CFC17CEC7F4C647DEAF707D197D85E17198FA3E5B47524B92C72590A48F71B482315E7F82B745CDCF17AE33E1E9264DC28A8CA1C91B751EE2D77F779D0F8439B8F16125024C07CC3169D02F308431C070F111600CE39062C0AC1305EE0D5E5FAE66B36B226F71CDF497142D243CDB712804FDAF0421F24B94D175DE838777305CE2BB63F715D1BE33F400176542017C1522A2BA8406C72934667C468A773026FF6A716E67740A5720C601A4623832ABB70140FEC05CA6935AABDA752D4CBEC1D854D53222AB692DBC2EE1C3109263A81EFF4A61426BDFDDD2769C590C69AB2F51AD69A72421FFDD0FEBCD7A7445BA5A2DD4B5D6221DA3921FC03D5A6632A5182CD7F904FDAC40728756B9837050665EE7BA9610CE71147C8A7C86B0CCBBBE04F11252718B1405E6511A7B7D4D445D4F232351923D4B33F1210A3B65AEC344107769009D206E2B2616EB43B4F954ADC58832199BD525C27E1B93D7A3B81E738CBCAF957D7813114D03A131CA79B08A620C6AB7A22F9035D15B30D195F1DDD44297065869A14B13DECB4217BA6768A00BAA67699F75DD386B3EADF9B4E6739095E669E4A581B9952AC99EA599D271234F61E2C568957BE8D69BB4E6D09AC31DF5264B53768231F0EEE87FEF5082A5CEA558F4BAB69FB59FD9524CD814682BBBD1FE8008DCD3C4D700CFD2D8EBFAA467C8871D7BE0878358FB5394AC7CB0EEE0F5C320AC0A11B01B977B64C7C6B25CCDC5B28E95DBC8727D46F05B4F9B4549ADB5DAD0651C468BBA1CB9A13E0CEAB8DBC3F0DA4D27F1CDFA7A6B9F616B965BFC206B2791EDEF0D7C0BDF4560F12E5A9E02E4AF8D8D314F6E0D720BAF7A167D3C67CBF8DB638F199A25B502F18C66E8818E5ED8A97907A7E6FC73D9B5A01E5A545B118C8257AB6DD442D8603EE711B6E07BF08D7E0486DB137B81B3754C9FB0637A0996866E07A178546FA398CD45A7435AFA33F02503D8E99E304C3671200BEEA39E21D61E6AEA27F65C7FB0A4D6D51C5F6EB6B0F02886F49F888841DC531E0A622B114F4922E6B4DD6461E9F593898AFC594A85CE7906DA51B3FCFE8FFD12B4C3BED24992441ECA86BBB159539D88E4EBFB365C385DC723F38AB3C72B49FD8912A015117B528963F7D06D8AF745780A7D88A173E2E5F7D96620F1C042E2D6901A6857A9FA7C5E57A9BC2BC357E86F021FA26730A6E60FF8C4BC254473518845A544A18756C0EFE893069DA63AD3D6561C9A3964C502436A9F3BDAAEC39ABD712256A1E2D41888AE1E9A4E18E96A17BAB6EF8DAAC1D6FAF8588FBBEC8043970CE831930859FDB17444B9EF25A11A0DD982B06A8C9D4E2DD803075B90DBDC8452678750C0B8A804F5004E6F3217E8417668E62A81854B911496B9296414750E71B937515E9CAD2D7669BACA1C414C1B08858913018A8C0EFADA6A0B0875560746759A5D80A8723A106A1D1220EA2C4D0C56E995686C214DDCFC8B861231CFEEC46A7E3693E0358B688EA0A27E7C760756B67B224064A91D94FC625C80E0B3F5B0AAA59C0AAD2AA087C72C0454884C9106266326C4AEAF6F9430C554B74E9AB64BC3CBAA1AC4EAAB6004357C230648611F267C43353AA1F5FC90D81FDAD3BFB103C034AE5BCD8D677C09BA41E7953E7935A15479D349FE1C4591309D28DEAD98BE07AB15591E30EF581429CE3C7FC462F6DDDCFC6D8720C7987889E48987AAB61527A26F60091BB9740658C033142798AC7DC00DA00B94D922108AF1D3A742694B5EFC0C290E5EA9C16579FA7F3D4B375FF3385000D5DD488A2EE9A8668D84ACA6A8281DFA9408F0412C5978CF223F0D42B503A5A6E69E7C6061B80C7DBCFAE90716AC4ED547AA3FD9B04875AA3E12FB0986C562D3F5D18AF71858A02249C4984E1AC32DB892826409BE392FA87A629C5BDBCDA5588AA323C40AC2716438FF70CBD2E729FA08EC3295C5695BBEAAD1B8BD25168ECB30C6A35B3712B437824BD286C5ED20712ACA6618E335EBC624EF8C5654CECCC67AA142D2D00C35E9AEEA0673FE8793BE3AD9182BBFB72541CB330C5A979F18E29A9727E9639447755890324D1F8539AAC30D569D6CEDC79EDB8F727B6163F3A100D2B01E4ACA718C87557DAD3EB6AAFFD455BF65CFC050F755481ACAAF261D47FBB9AB2CFCBA89C9B0D6C45A136B4D7A591366BF7030BBA2C634B0306D20E3D89AFAD232B7D953A51A582DF6563267B5D80C033CE64B2007D7F285508D663572A73532FB6C35982ECAD00CB4504EBEFB9EFE1073E9D0BEC7CECECDDCDD04A90A5FF7D9F296DF3F90E3F7DB06B7966C472D59E383FE00D6AC1D51CBA275418C63D5F8BBAC2C0E9F33BED43FF296F730F35A1B9AC1D6F7739ED736DF8EB733D9D03319736994331175B2319638CC5C86319ED2ECC8F28DD195D3A52CBF2F7A73F21473FBF68A02B997E7D07271B48D452FC96EBD2ADACACD7A6C9A78FBE0B1D1F38E1B4FCD12108D19594AD5319536CD64CB8552355671B393C5915E357DC461E1CE906E3C3E6D681A03D54E3EAAEB34C878EF99DBDC38F13BD4E82BF0F4C75F096025601C09A84F680F25034A447D29688118470E982B979CC5AE93AD13B2174E88702EBC59A4E25EA454BFAB73E1C599ECEE2087C221EDBC88EB904EBA470B7A407BBE4E300C0E688183F96FFECC4799475B16780F42740B139CDF65A64F94FFD88892B83B110B2749B2E0AE5AABC316F2C3B585FBD837688968BF765EC537BCF62C89169886E8B714A20CF1164903C79D870BF870ECFEC7394FAEB2D247CE659C42E7BF1B47190CEF41ECDD0143A68DF744360C3858D6E12F0178F82B8BD62FA8E046705CE0400324D3E0804F46A0D907C094FDD533D05E5967B56852CA23E7FCDFD735F10BE7222686F0C879D9433D242F1CD079070FF2C2C146822979C540563303A85E15338F70F768923E80208BE13ECC7A5A78065201DC13373FB03528F225FB9CA414F3B5B9C1E71F76BC41E683233CEAD807C42AF750CA2D3D52BDCFB3985554ABA84F515115CFB6ECEE2C2C0905602763ABE356C7BB755C7500799FE7E5665C26A9121C9ADB0249182629F40FE6C842D42583556C4D6C57B13BA55BE2F1AB7DD62AE54CD86B4CA5B354CFBD3CE5E4DF0B6FB7A63AC98BEA1BB5AEEDB9F42180ADF918C07CB49DE1DD6713228B78D3D3E5EF2F6EFD42DE3C9931D85533AEF549C0DAEFD1ECB710D045544C0398C146531DC5A5AF0D574775190671A0594B15C96550D061655323228B753176C2C5108EA3EE7248939E1E0217D344636F6DB090254FCD55D8075FADEDD8A61D826D0E81E2CCE40E7F3D10E25C6CBD8F9FF9F43440008BC78C5851BEB8CCD4602B012AB6F1C8BFF25D5291D35E07A0D87EE487B657AA370E7AB1515889C7091EB13FC122C447B19B235B1C0B2F9745DDC120F213DBC42ADFD06D99DC7E16998930B8027E57A808297AF9B27D07B8561C09198332B79B85469809198322B31B5F2B08858C4399ABCFC23846451BDBBA9C7E05B48259C898DE931CE67DFF4E763DE25DC8DBFA2DF449A96B52EC7A84B818CAA66A074169099D21032719DDA365145443C6859630E832E3C01BAD3C470DCFD1CA7937C27898C7EDE02DF41E87E9D00A97D1E9DC48305AE2F60C127C43BC4C45DC0232BB921550FEEB14266859434C0966083DCE21A8CA9C87B751E99B346A541669AC9ADE430CC8BA099CC418DD020F936C0F2649161530DBA7A277486EE0E23CBC48F12AC5A4C930B8E1359BFA376DFCB308237C9DA717D967F1648826906A22BAF4BB08DFA4C85F54F53E936C192820A8E354EC8DD0B1C4748F64B9AE90C498942AA0A2FB2A7FEF12062B9F802517E11CDCC33E75BB4AE03BB804DEFA6371274E0DD23D107CB74F4F1158C620480A8C9A9EFC2432BC081E7EFA3FA055F79D5EA90000 , N'6.1.3-40302')
END

IF @CurrentMigration < '201711280046496_v1.4'
BEGIN
    ALTER TABLE [dbo].[Tags] ADD [ContentType] [nvarchar](20)
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201711280046496_v1.4', N'WIKI.EntityFramework.Migrations.Configuration',  0x1F8B0800000000000400ED5D5B6FDCB8157E2FD0FF20E8A92DB29E38DB0DB6C67817CE38DE1A9BC469C64EFA66D01A7A4C44975989723C28FACBF6617F52FF42495D499194488D349EB109BF78489EEFF072CEE1116FE77FBFFF31FDF921F09D7B1827280A8FDDC38397AE03432F5AA07079ECA6F8F6BB1FDD9F7FFAF39FA66F17C183F3B92CF73D2D4728C3E4D8BDC37875349924DE1D0C407210202F8E92E8161F785130018B68F2EAE5CB7F4C0E0F279040B804CB71A69FD210A300663FC8CF59147A708553E0BF8F16D04F8A749233CF509D0F2080C90A78F0D8FD72FEEBF9C15B428ED7673149FE16C55F5DE7C44780D4650EFD5BD70161186180494D8FAE1238C771142EE72B9200FCCBF50A9272B7C04F60D182A3BAB86E635EBEA28D99D48425949726380A0C010FBF2F7A67D224EFD5C76ED57BA4FFF28EA2ADCEFAF0D83DF1BC8874BEEB34791DCDFC98962B7A7816C530EF6604938382EA8593E57D8137272B94157951C904111DFAF7C299A53E4E63781CC214C7C07FE17C4C6F7CE4FD0AD797D157181E87A9EFB37524B524795C0249FA18472B18E3F527785BD4FC7CE13A139E6ED224ACC8189ABC51E7217EFD77D7F94098831B1F5622C074C01C9306FD024318030C171F01C6300E2906CC3A51E0DEE0F5E56A36BB26F216D74C7F49D142C2B31D8742D0FF4A1022BF44195DE73D787807C325BE3B765F11ED3B430F70512614C0572122AA4B68709C4263C667A4780763F2AF16E77646A77005621C402A8623B37A1B00E40FCC653AA9B5AA5DD7C2E41B8C4D552D23B29AD6C2EB123E0C213986EAF1AF1426B4F6DD2D6DC799C590B6FA12D59A764A12F2DFFDB0DEAC4757A4ABD5425D6B2DD2312AF901DCA36526538AC1729D4FD0CF0A247768953B080765E675AE6B09E11C47C1A7C86708CBBCEB4B102F2115B74851601EA5B1D7D744D4F534321225D9B334131FA2B053E63A4C04719706D009E2B66262B13E449B4FD55A8C2893B1595D22ECB731793D8AEB31C7C8FB5AD9873711D134101AA39C07AB28C6A0762BFA025913BD05135D19DF4D2D7469809516BA34E1BD2C74A17B8606BAA07A96F659D78DB3E6D39A4F6B3E07F9D23C8DBC3430B75225D9B334533A6EE4294CBC18AD720FDD7A93D61C5A73B8A3DE6469CA4E3006DE1DFDEF1D4AB0D4B9148B5ED7F6B3F6335B8A098B026D65375A1F10817B9AF81AE0591A7B5D9FF40CF9B0630DFC70106B7F8A92950FD61DBC7E188455210276E1728FECD85896ABF9B1AC63E536B25C9F11FCD6D36651526BAD36741987D1A22E476EA88D411D777B185EBBE924BE595F6F6D1BB666B9C50D593B896C7F6DE05BF82E028B77D1F214207F6D6C8C79726B905B78D5B3E8E3395BC67B8F3D666896D40AC4339AA1073A7A61A7E61D9C9AF3EDB26B413DB4A8B6221805AF56DBA885B0C17CCE236CC1F7E01BFD080CB727F60267EB983E61C7F4122C0DDD0E42F1A8DE46319B8B4E87B4F467E04B06B0D33D61986CE24016DCB77C8678B4BD256DA9A22E69CF4F1D96D47AB5E38BE816BE718A21FD27226210F7948782D84AC4539288396D37F986F5FAC94445FE2CA542E7E804EDA8597ED5C86E3AEDB05B7692249187B2E16EAC0B55872FF9FABE0D174ED749CCBCE2EC494E527FA2046845C49E54E2D83D749BE27D119E421F62E89C78F9D5B919483CB0907850A406DA55AA76EAEB2A95D772F80AFD4DE043F40CC6D4FC019F98B784682E0AB1A89428F4D00AF81D7DD2A0D35467DADA8A4333877C1CC190DAE78EB6EBB0662FB78855A8383506A2AB87A61346BADA85AE6D6B5335D85AFB9CF5B8CBCE5274C9801E338990D5FBB223CA7D2F09D568C816845563EC746AC19E6DD882DCE626943A3B8402C64525A807707A93B9400FB2F33957092C5C8AA4B0CC4D21A3A87388CB6590F28E6E6DB14BD355E60862DA40284C9C08506474D0D7565B40A8B33A30AA83F3024495D38150EB900051676962B04AAF44630B69E2E69B274AC43CBB13ABB94327C16B16D11C4145FDF8EC0EAC6CA14680C8523B28F98F710182CFD6C3AA3EE5546855013D3CE6434085C8146960326642ECFAFAF20A534C75C1A569BB34BCACAA41ACBE0A4650C337628014F661C23754A3135A8F2A89FDA13DFD1B3B004CE3BAD5DC78C697A01B745EE99357134A95379DE42F5F1409D389E2898CE97BB05A91CF03E6C98C22C599E7EF65CCBE9B9B3F2311E418132F91BC2651D5B6E244F40D2C612397CE000B7886E204936F1F7003E807CA6C1108C5F8E953A1B4252F7E861407AFD4E0B23CFDBF9EA59B0F871C2880EA6E2445977454B34642565354940E7DB504F820967C78CF223F0D42B503A5A6E65E976061B80C7DBCFA950916AC4ED547AA778758A43A551F89DDED61B1D8747DB4E2E90716A8481231A693C6700BAEA42059826FCE0BAA9E18E7D676732996E2E808B182701C19CEF78859FA3C451F81FD4C6571DA3E5FD568DCDA120BC76518E3D1A51B09DA1BC12569C3E25690381565338CF19A75639277462B2A676663BD50216968869A74577583396AC4495F9D6C8C956FE349D0F20C83D6E58793B8E6E549FA18E5A92016A44CD347614E05718355275BFBB1E7F6A35C5ED8D87C288034AC8792721CE361555FAB8FADEA3F75D56F593330D47D159286F2AB49C7D17EEED60CFFDDC464586B62AD89B526BDAC09B35E38985D51631A58983690716C4D7D3F9A5BECA9520DAC167B019AB35A6C86011EB313C8C1B5EC10AAD1AC46EEB44666DB5683E9A20CCD400BE5E4BBEFE90F31970EED7BECECDCCC5D8390AAF0759F256FF95507397EBF65706BC976D4923536F407B066ED885A16AD0B621CABC65F9B6571F89CF1A5FE9197BC8799D7DAD00C96BE9FF3BCB6F972BC9DC9869EC998FBA99C89A8938DB1C461E6328CF1946647966F8CAE9C2E65F97DD19B93A798DBB75714C8BD3C87963BAA6D2C7A4976EBADD4566ED663D3C4DB078F8D9E77DC786A968068CCC852AA8EA9B469265BEEAEAAB18A4BA42C8EF456AB467D8C97801F6998B933A91B8F771B9AC6C0B7938FEA8A0D223F7BE686374E100F35FA0A3CFDF157025809184702EA13DF43C98012515F0A5A20C69103E60A273703D4C9D6A9D90BA7463867DE2C52712F52AADFD539F3E28C77777C46E1D0775EC4754827DDA3053DF03D5F27180607B4C0C1FC377FE6A3CC432E0BBC0721BA8509CEEF46D3D7D57F6C0478DC9D608B9324597057B7D51117F9E1DAC2FDEE1BB444B45F3BAFF61B5EA396043A4C43F45B0A5186788BA431EFCEC3057C3876FFE39C275759E923E7324EA1F3DF8D032486F720F6EE8021D3C673241BC64A2CEBF097003CFC9545EB170F7123382EE6A10192695CC32723D0ECDB65CAFEEA1923B0ACB35A3429E59173FEEFEB9AF8857311134378E4BCECA11E921713E8BC830779316123C194BC8A20AB990154AF8A9907E77B34491F4090C54825663D2DBC60A900EE89CBBE143510F225FB12A614F3B5B9C1E7DFA4BC41E68323BC47D907C42AF750CA2D3DA2BDCFB3985554ABA84F515115CFC0ECEE2C2C8962602763ABE356C7BB755C75A0799FE7E5664829A9121C9ADB0249042929F40FE6C842C02883AFD89AD87EC5EE946E89C7B9F659AB943361AF3195CE523DD7F294937F2FBCDD9AEA248FC16FD4BAB697DE8700B6E66300F3D17626789F4D882C584F4F97BFBFB8F58BD6F364C66057CDB8D69680B5DFA3D96F21168DA8980630838DA63A004D5F1BAE0E48330CE240B3962A08CDA0A0C3CAA6463019EB62EC848B211C6FDDE5682C3D3D042E1C8BC6DA5ADF682BBD96EDFA0557796A4EC83E78816D0742ED106C730814A73177785F4288C8B1F53E7EE613DF00A1361E33B646F936345383AD84D2D8463802E50BAA22A7BD0E95B1FD18156DEF696F1C9E63A300188F13E6627FC25A88CF773747B638705E7E707587ADC8CF8213AB7C43177C72FB596426C2E00AF85D412DA4E8E51BFC1DE05A112F640CCADC6E161A0131640C8ACC6E7CAD7019320E65AE3E0BE3681A6D6CEB72FA15D00ABB21637A4F729848049DEC7A44E690B7F55BE89352D7A4D8F508113C944DD50ED7D212E443064E32BA47CB28FC878C0B2D61D065C621425A798E1A48A495F36E041C318F30C25BE83D0E28A215D8A3D3B99160B444181A244C88784D8BB8056476255F40F9AF5398A0650D31259821F43887A02A731EDE46A56FD2A85159A4F1D5F41E6240BE9BC0498CD12DF030C9F6609264F10BB315307A3BE5062ECEC38B14AF524C9A0C831B5EB3A97FD3C63F8B85C2D7797A916DB8274334815413D14FBF8BF04D8AFC4555EF33C9928102823A4EC5DA081D4B4CD74896EB0A498C9EA9022ABAAFF2F72E61B0F209587211CEC13DEC53B7AB04BE834BE0AD3F16B7EDD420DD03C177FBF41481650C82A4C0A8E9C94F22C38BE0E1A7FF0353C053E473AA0000 , N'6.1.3-40302')
END



/****** Object:  Table [dbo].[Logs]    Script Date: 2017/11/30 10:33:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Logs](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[Level] [nvarchar](128) NULL,
	[TimeStamp] [datetimeoffset](7) NOT NULL,
	[Exception] [nvarchar](max) NULL,
	[LogEvent] [nvarchar](200) NULL,
	[LogType] [int] NULL,
	[UserId] [nvarchar](100) NULL,
	[UserName] [nvarchar](200) NULL,
	[FullName] [nvarchar](200) NULL,
	[IP] [nvarchar](100) NULL,
	[RefUrl] [nvarchar](4000) NULL,
	[Url] [nvarchar](4000) NULL,
	[Module] [nvarchar](200) NULL,
	[Action] [nvarchar](200) NULL,
	[HttpMethod] [nvarchar](50) NULL,
	[Content] [nvarchar](max) NULL,
 CONSTRAINT [PK_Logs] PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  View [dbo].[view_Document]    Script Date: 2017/11/30 10:33:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[view_Document]
AS
	SELECT d.[Id]
      ,[ContentNo]
      ,[Title]
      ,[Sticky]
      ,[Important]
      ,[Description]
      ,d.[CreatedTime]
	  ,d.CreatedBy
      ,a.FullName as CreatedBy_FullName
	  ,a.Department as CreatedBy_Department
      ,d.[UpdatedTime]
      ,d.[UpdatedBy]
  FROM [WIKI].[dbo].[Documents] as d
  join Accounts as a on a.UserName = d.CreatedBy 
GO
/****** Object:  View [dbo].[view_Question]    Script Date: 2017/11/30 10:33:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE VIEW [dbo].[view_Question]
AS
	SELECT q.[Id]
          ,q.[ContentNo]
		  ,q.[Title]
		  ,q.[Text]
		  ,[Sticky]
		  ,[Important]
		  ,q.[CreatedTime]
		  ,q.[UpdatedTime]
		  ,q.UpdatedBy
		  ,q.CreatedBy
		  ,cb.FullName as CreatedBy_FullName
		  ,cb.Department as CreatedBy_Department
		  ,a.Id as Answer_Id
		  ,a.Text as Answer_Text
		  ,a.CreatedTime as Answer_CreatedTime
		  ,a.UpdatedTime as Answer_UpdatedTime
		  ,a.UpdatedBy as Answer_UpdatedBy
		  ,a.CreatedBy as Answer_CreatedBy
		  ,rb.FullName as Answer_CreatedBy_FullName
		  ,rb.Department as Answer_CreatedBy_Department
	FROM [WIKI].[dbo].[Questions] as q
	left join Answers as a on a.QuestionId = q.Id
	left join Accounts as cb on cb.UserName = q.CreatedBy
	left join Accounts as rb on rb.UserName = a.CreatedBy
GO
